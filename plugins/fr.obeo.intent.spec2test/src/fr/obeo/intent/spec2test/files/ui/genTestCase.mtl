[comment encoding = UTF-8 /]
[module genTestCase('http://www.eclipse.org/intent/specification/1.0', 'http://www.eclipse.org/emf/2002/Ecore')]
[import fr::obeo::intent::spec2test::files::genAutomationUtils /]

[template public genTestCase(scenario : Scenario, type : TestType)post (trim())]
[let pkg : String = getFeaturePackage(scenario.oclAsType(EObject), type)]
[file (getFeaturePath(scenario.oclAsType(EObject), type)+'/'+scenario.name+'.java', false, 'UTF-8')]
[genLicence()/]
package [pkg/];
import org.junit.Rule;
import org.junit.Test;
[for (contxt : Context | scenario.given)]
import [getContextsPackage(scenario.eContainer(Specification))/].[contxt.name/];
[/for]

public class [scenario.name/] {
[for (contxt : Context | scenario.given)]
	@Rule
	public [contxt.name/] context = new [contxt.name/]();
[/for]

	@Test
	public void [scenario.name.toLowerFirst()/]() throws Exception {
	[for (action : Action | scenario.when)]
		context.action[action.name/]();
	[/for]
	[for (behaviour : Behaviour | scenario._then)]
		context.assert[behaviour.name/]();
	[/for]
	}
}
[/file]
[/let]
[/template]